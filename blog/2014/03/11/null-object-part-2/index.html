<hr />

<p>layout: post
title: &ldquo;Null Object Part 2&rdquo;
date: 2014-03-11 14:57:10 -0600
comments: true</p>

<h2>categories: </h2>

<p>In a <a href="/blog/2014/03/05/the-null-object-pattern-and-method-missing-in-ruby/">previous post</a> I described using <code>method_missing</code> in a Null Object to stand in for another object and respond smartly to the original object&rsquo;s interface. At the end of that post I suggested that you could go further than we did in creating a more abstract object. Well, we got that chance.</p>

<p>In this post I will show you how we created a <code>NilObject</code> that can both stand on its own and be extended with added functionality in a subclass. Our <code>NilObject</code> needs to be smart about the interface of the class that it&rsquo;s faking, so we&rsquo;ll have to take that into account. Finally, we decided to implement a smart <code>respond_to?</code> method to round out the functionality of our <code>NilObject</code>.</p>

<p>Here&rsquo;s the final form that our NilDuck took at the end of the previous post:</p>

<h3>GIST HERE</h3>

<p>A few days after making those changes, we ran into another custom Null Object in our app, the <code>NilGoose</code> (shhh&hellip;let it happen). Our <code>NilGoose</code> ran into the same problem that <code>NilDuck</code> originally did. A new method was added to the <code>Goose</code> class that wasn&rsquo;t reflected in <code>NilGoose</code> and a bug appeared.</p>

<p>What to do? Well, we try not to run ahead of ourselves or our tests, so the first thing we did was create a test that expected the missing method, watched it fail, and copied the <code>method_missing</code> definition from <code>NilDuck</code>, renaming as we needed to. This made our test happy. But the duplicated code made us sad. We knew it was time to factor out our common code into a single spot.</p>

<p>We thought about putting it in a Module, but decided instead to make it a full-fledged <code>NilObject</code> class that we could reuse anywhere else we might need.</p>

<h3>GIST HERE</h3>
